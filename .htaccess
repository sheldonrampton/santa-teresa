# Emergency Fix by pair Networks - Fri May  4 15:11:09 2012
RewriteEngine on
RewriteCond %{QUERY_STRING} ^[^=]*$
RewriteCond %{QUERY_STRING} %2d|- [NC]
RewriteRule .? - [F,L]

#
# Apache/PHP/Drupal settings:
#

AddType application/x-httpd-php52cgi .php
Action application/x-httpd-php52cgi /cgi-sys/php52.cgi 

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|module|profile|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(code-style\.pl|Entries.*|Repository|Root|Tag|Template)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
# For security reasons, Option followsymlinks cannot be overridden.
#Options +FollowSymLinks
Options +SymLinksIfOwnerMatch

# Customized error messages.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php

# Override PHP settings. More in sites/default/settings.php
# but the following cannot be changed at runtime.

# PHP 4, Apache 1.
<IfModule mod_php4.c>
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
  php_value register_globals        0
  php_value track_vars              1
  php_value short_open_tag          1
  php_value magic_quotes_gpc        0
  php_value magic_quotes_runtime    0
  php_value magic_quotes_sybase     0
  php_value arg_separator.output    "&"
  php_value session.cache_expire    200000
  php_value session.gc_maxlifetime  200000
  php_value session.cookie_lifetime 2000000
  php_value session.auto_start      0
  php_value session.save_handler    user
  php_value session.cache_limiter   none
  php_value allow_call_time_pass_reference  On
  php_value upload_max_filesize     25M
  php_value post_max_size           25M
  php_value memory_limit            200M
  php_value upload_tmp_dir          25M
  php_value max_execution_time      50000
</IfModule>

# PHP 4, Apache 2.
<IfModule sapi_apache2.c>
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
  php_value register_globals        0
  php_value track_vars              1
  php_value short_open_tag          1
  php_value magic_quotes_gpc        0
  php_value magic_quotes_runtime    0
  php_value magic_quotes_sybase     0
  php_value arg_separator.output    "&"
  php_value session.cache_expire    200000
  php_value session.gc_maxlifetime  200000
  php_value session.cookie_lifetime 2000000
  php_value session.auto_start      0
  php_value session.save_handler    user
  php_value session.cache_limiter   none
  php_value allow_call_time_pass_reference  On
  php_value upload_max_filesize     25M
  php_value post_max_size           25M
  php_value memory_limit            200M
  php_value upload_tmp_dir          25M
  php_value max_execution_time      50000
</IfModule>

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
  php_value register_globals        0
  php_value track_vars              1
  php_value short_open_tag          1
  php_value magic_quotes_gpc        0
  php_value magic_quotes_runtime    0
  php_value magic_quotes_sybase     0
  php_value arg_separator.output    "&"
  php_value session.cache_expire    200000
  php_value session.gc_maxlifetime  200000
  php_value session.cookie_lifetime 2000000
  php_value session.auto_start      0
  php_value session.save_handler    user
  php_value session.cache_limiter   none
  php_value allow_call_time_pass_reference  On
  php_value upload_max_filesize     25M
  php_value post_max_size           25M
  php_value memory_limit            200M
  php_value upload_tmp_dir          25M
  php_value max_execution_time      50000
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On
  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600
  # Do not cache dynamically generated pages.
  ExpiresByType text/html A1
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # adapt and uncomment the following:
  # RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
  # RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # adapt and uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
  # RewriteRule ^(.*)$ http://example.com/$1 [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory and
  # the rewrite rules are not working properly.
  #RewriteBase /drupal

  # Rewrite old-style URLs of the form 'node.php?id=x'.
  #RewriteCond %{REQUEST_FILENAME} !-f
  #RewriteCond %{REQUEST_FILENAME} !-d
  #RewriteCond %{QUERY_STRING} ^id=([^&]+)$
  #RewriteRule node.php index.php?q=node/view/%1 [L]

  # Rewrite old-style URLs of the form 'module.php?mod=x'.
  #RewriteCond %{REQUEST_FILENAME} !-f
  #RewriteCond %{REQUEST_FILENAME} !-d
  #RewriteCond %{QUERY_STRING} ^mod=([^&]+)$
  #RewriteRule module.php index.php?q=%1 [L]

RewriteCond %{HTTP_HOST} .*www\.wccnica\.(org|com|net)
RewriteRule ^(.*)$ http://www.capitalforcommunities.org/$1 [L,R=301]
 

  # Rewrite current-style URLs of the form 'index.php?q=x'.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
</IfModule>


# $Id: .htaccess,v 1.81.2.3 2007/09/21 12:24:22 drumm Exp $
